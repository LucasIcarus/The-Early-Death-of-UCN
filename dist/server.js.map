{"version":3,"sources":["webpack:///webpack/bootstrap 5cf90355b1773dddf781","webpack:///external \"keystone\"","webpack:///external \"lodash\"","webpack:///external \"moment\"","webpack:///./src/core/config.js","webpack:///external \"fs\"","webpack:///external \"graphql\"","webpack:///external \"path\"","webpack:///./src/server/keystone.js","webpack:///./src/server/graphql/basicSchema.js","webpack:///./src/server/graphql/keystoneTypes.js","webpack:///./src/server/models/ExhibCard.js","webpack:///./src/server/models/Footprint.js","webpack:///./src/server/models/IndexCarousel.js","webpack:///./src/server/models/Slogan.js","webpack:///./src/server/models/User.js","webpack:///./src/server/routes/index.js","webpack:///external \"./assets\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"express-graphql\"","webpack:///external \"lru-cache\"","webpack:///external \"pretty-error\"","webpack:///external \"serialize-javascript\"","webpack:///external \"vue-server-renderer\""],"names":["root","process","cwd","port","env","PORT","config","path","rootDir","srcDir","distDir","publicDir","bundleFile","faviFile","viewsDir","host","WEBSITE_HOSTNAME","mongo","options","user","pass","uri","dbName","seed","uriUser","cloudinary","secret","VUE_ENV","init","GA_PROPERTY","GA_DOMAIN","CHARTBEAT_PROPERTY","CHARTBEAT_DOMAIN","imported","Carousel","require","Slogan","Footprint","ExhibCard","User","set","_","get","utils","editable","content","ga_property","ga_domain","chartbeat_property","chartbeat_domain","start","keystoneTypes","list","returnEmptyObj","CarouselImageType","name","fields","id","type","srcLocation","SloganType","ExhibCardType","imageSrc","FootprintType","longitude","latitude","IndexType","carouselImages","resolve","args","model","find","sort","select","exec","slogan","findOne","exhibCards","footprints","queryRootType","index","query","first","last","full","cloudinaryImage","public_id","version","signature","format","resource_type","url","width","height","secure_url","location","number","street1","street2","suburb","state","postcode","country","geo","description","date","field","source","datetime","link","raw","markdown","md","html","email","gravatarUrl","size","defaultValue","defaultImage","rating","Types","Field","List","track","autokey","from","unique","add","String","required","initial","default","label","note","publishedAt","Datetime","now","defaultSort","defaultColumns","register","schema","pre","next","test","mark","legacy","Boolean","noedit","collapse","singular","plural","nocreate","nodelete","remove","err","indexSlogan","save","console","log","keystone","Name","Email","phone","photo","CloudinaryImage","password","Password","isProtected","hidden","virtual","relationship","ref","refPath","methods","wasActive","lastActiveOn","Date","protect","value","forEach","importRoutes","importer","__dirname","bundlePath","renderer","readFileSync","cache","max","assets","pe","skipNodeFiles","skipPackage","exports","module","app","use","graphiql","req","res","statusCode","data","title","body","entry","main","js","context","reject","renderToString","initialState","isJSON","status","render","message","stack"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5cf90355b1773dddf781","module.exports = require(\"keystone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"keystone\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 2\n// module chunks = 0","import { join } from 'path'\n\nconst root = process.cwd()\nconst port = process.env.PORT || 5000\nconst config = {\n\n\t// path\n\tpath: {\n\t\trootDir: root,\n\t\tsrcDir: join(root, './src'),\n\t\tdistDir: join(root, './dist'),\n\t\tpublicDir: join(root, './dist/public'),\n\t\tbundleFile: join(root, './dist/server-bundle.js'),\n\t\tfaviFile: join(root, './dist/public/logo.png'),\n\t\tviewsDir: join(root, './dist/views')\n\t},\n\n\t// server config\n\tport: port,\n\thost: process.env.WEBSITE_HOSTNAME || `localhost:${port}/`,\n\n\t// mongo settings\n\tmongo: {\n\t\toptions: {\n\t\t\tuser: 'ucn',\n\t\t\tpass: 'ucn',\n\t\t},\n\t\turi: 'mongodb://127.0.0.1/UCN-Dev',\n\t\tdbName: 'UCN-Dev',\n\t\tseed: true,\n\t\turiUser: 'mongodb://ucn-rw:ucn-rw@localhost:27017/ucn',\n\t},\n\n\tcloudinary: 'cloudinary://399194737659477:W0ReCPvrkeFoRvx3VlW28fX1u08@fancy-ucn',\n\n\tsecret: '58813c20e6ae29b9f4c9cf7347143ee1c215009517d5e5b50714aae3e383e602326c5e9dc9bee8cb9e3cb11d0c78bc7b617b23da5dce5d9c34912864a58589f1',\n\n\n}\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","import keystone from 'keystone'\nimport config from '../core/config.js'\nimport fs from 'fs'\nimport path from 'path'\n\nprocess.env.VUE_ENV = 'server'\n\nkeystone.init({\n\n    'name': 'UCN-誉华会展',\n    'env': 'development',\n    'brand': 'UCN-Admin',\n\n    'port': config.port,\n\n    'favicon': 'public/favicon.ico',\n    'less': 'public',\n    'static': 'public',\n\n    'views': 'templates/views',\n    'view engine': 'jade',\n\n    'auto update': true,\n    'mongo': config.mongo.uriUser,\n    'cloudinary config': config.cloudinary,\n\n    'session': true,\n    'auth': true,\n    'user model': 'User',\n    'cookie secret': config.secret,\n\n    'ga property': process.env.GA_PROPERTY,\n    'ga domain': process.env.GA_DOMAIN,\n\n    'chartbeat property': process.env.CHARTBEAT_PROPERTY,\n    'chartbeat domain': process.env.CHARTBEAT_DOMAIN\n\n});\n\nconst imported = {\n    Carousel: require('./models/IndexCarousel.js'),\n    Slogan: require('./models/Slogan.js'),\n    Footprint: require('./models/Footprint.js'),\n    ExhibCard: require('./models/ExhibCard.js'),\n    User: require('./models/User.js')\n}\n\nkeystone.set('locals', {\n    _: require('lodash'),\n    env: keystone.get('env'),\n    utils: keystone.utils,\n    editable: keystone.content.editable,\n    ga_property: keystone.get('ga property'),\n    ga_domain: keystone.get('ga domain'),\n    chartbeat_property: keystone.get('chartbeat property'),\n    chartbeat_domain: keystone.get('chartbeat domain')\n});\n\nkeystone.set('routes', require('./routes'));\n\nkeystone.set('nav', {\n    '主页': ['carousel-images', 'slogans', 'exhib-cards', 'footprints'],\n    // 'posts': ['posts', 'post-comments', 'post-categories'],\n    '系统控制': ['users']\n});\n\nkeystone.start()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/keystone.js","import {\n    GraphQLBoolean,\n    GraphQLSchema,\n    GraphQLID,\n    GraphQLInt,\n    GraphQLList,\n    GraphQLNonNull,\n    GraphQLObjectType,\n    GraphQLString,\n    GraphQLEnumType,\n} from 'graphql'\n\nimport * as keystoneTypes from './keystoneTypes'\nimport keystone from 'keystone'\n\nconst Carousel = keystone.list('Carousel-Image')\nconst Slogan = keystone.list('Slogan')\nconst ExhibCard = keystone.list('Exhib-Card')\nconst Footprint = keystone.list('Footprint')\nconst returnEmptyObj = () => ({})\n\nconst CarouselImageType = new GraphQLObjectType({\n    name: 'CarouselImage',\n    fields: () => ({\n        id: { type: new GraphQLNonNull(GraphQLID) },\n        srcLocation: { type: GraphQLString }\n    })\n})\n\nconst SloganType = new GraphQLObjectType({\n    name: 'Slogan',\n    fields: () => ({\n        id: { type: new GraphQLNonNull(GraphQLID) },\n        content: { type: GraphQLString }\n    })\n})\n\nconst ExhibCardType = new GraphQLObjectType({\n    name: 'ExhibCard',\n    fields: () => ({\n        id: { type: new GraphQLNonNull(GraphQLID) },\n        name: { type: GraphQLString },\n        imageSrc: { type: GraphQLString }\n    })\n})\n\nconst FootprintType = new GraphQLObjectType({\n    name: 'Footprint',\n    fields: () => ({\n        id: { type: new GraphQLNonNull(GraphQLID) },\n        name: { type: GraphQLString },\n        longitude: { type: GraphQLString },\n        latitude: { type: GraphQLString }\n    })\n})\n\nconst IndexType = new GraphQLObjectType({\n    name: 'Index',\n    fields: () => ({\n        carouselImages: {\n            type: new GraphQLList(CarouselImageType),\n            resolve: (_, args) => Carousel.model.find().sort('+publishedAt').select('srcLocation').exec()\n        },\n        slogan: {\n            type: SloganType,\n            resolve: (_, args) => Slogan.model.findOne().select('content').exec()\n        },\n        exhibCards: {\n            type: new GraphQLList(ExhibCardType),\n            resolve: (_, args) => ExhibCard.model.find().sort('+publishedAt').select('name imageSrc').exec()\n        },\n        footprints: {\n            type: new GraphQLList(FootprintType),\n            resolve: (_, args) => Footprint.model.find().sort('-publishedAt').select('name longitude latitude').exec()\n        }\n    })\n})\n\nvar queryRootType = new GraphQLObjectType({\n    name: 'Query',\n    fields: {\n        index: {\n            type: IndexType,\n            resolve: (_, args) => returnEmptyObj()\n        }\n    },\n})\n\n\nexport default new GraphQLSchema({\n    query: queryRootType,\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/basicSchema.js","import {\n\tGraphQLInt,\n\tGraphQLList,\n\tGraphQLObjectType,\n\tGraphQLString,\n} from 'graphql'\n\nexport const name = new GraphQLObjectType({\n\tname: 'KeystoneName',\n\tfields: {\n\t\tfirst: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tlast: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tfull: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t},\n})\n\nexport const cloudinaryImage = new GraphQLObjectType({\n\tname: 'KeystoneCloudinaryImage',\n\tfields: {\n\t\tpublic_id: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tversion: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tformat: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tresource_type: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\turl: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\twidth: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\theight: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\tsecure_url: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t},\n})\n\nexport const location = new GraphQLObjectType({\n\tname: 'KeystoneLocation',\n\tfields: {\n\t\tname: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tnumber: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\tstreet1: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tstreet2: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tsuburb: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tstate: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tpostcode: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\tcountry: {\n\t\t\ttype: GraphQLInt,\n\t\t},\n\t\tgeo: {\n\t\t\ttype: new GraphQLList(GraphQLString),\n\t\t\tdescription: 'An array [longitude, latitude]',\n\t\t},\n\t},\n})\n\nexport const date = (field) => ({\n\ttype: GraphQLString,\n\targs: {\n\t\tformat: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'A formated time using Moment.js tokens ' +\n\t\t\t\t'http://momentjs.com/docs/#/displaying/format/',\n\t\t},\n\t},\n\tresolve: (source, args) => {\n\t\tif (args.format) {\n\t\t\treturn field.format(source, args.format);\n\t\t}\n\t\treturn source.get(field.path);\n\t},\n})\n\nexport const datetime = (field) => ({\n\ttype: GraphQLString,\n\targs: {\n\t\tformat: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'A formated datetime using Moment.js tokens ' +\n\t\t\t\t'http://momentjs.com/docs/#/displaying/format/',\n\t\t},\n\t},\n\tresolve: (source, args) => {\n\t\tif (args.format) {\n\t\t\treturn field.format(source, args.format);\n\t\t}\n\t\treturn source.get(field.path);\n\t},\n})\n\nexport const link = new GraphQLObjectType({\n\tname: 'KeystoneLink',\n\tfields: {\n\t\traw: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'The raw unformmated URL',\n\t\t},\n\t\tformat: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'The URL after being passed through the `format Function` option',\n\t\t},\n\t},\n})\n\nexport const markdown = new GraphQLObjectType({\n\tname: 'KeystoneMarkdown',\n\tfields: {\n\t\tmd: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'source markdown text',\n\t\t},\n\t\thtml: {\n\t\t\ttype: GraphQLString,\n\t\t\tdescription: 'generated html code',\n\t\t},\n\t},\n})\n\nexport const email = new GraphQLObjectType({\n\tname: 'KeystoneEmail',\n\tfields: {\n\t\temail: {\n\t\t\ttype: GraphQLString,\n\t\t},\n\t\tgravatarUrl: {\n\t\t\ttype: GraphQLString,\n\t\t\targs: {\n\t\t\t\tsize: {\n\t\t\t\t\ttype: GraphQLInt,\n\t\t\t\t\tdefaultValue: 80,\n\t\t\t\t\tdescription: 'Size of images ranging from 1 to 2048 pixels, square',\n\t\t\t\t},\n\t\t\t\tdefaultImage: {\n\t\t\t\t\ttype: GraphQLString,\n\t\t\t\t\tdefaultValue: 'identicon',\n\t\t\t\t\tdescription: 'default image url encoded href or one of the built ' +\n\t\t\t\t\t\t'in options: 404, mm, identicon, monsterid, wavatar, retro, blank',\n\t\t\t\t},\n\t\t\t\trating: {\n\t\t\t\t\ttype: GraphQLString,\n\t\t\t\t\tdefaultValue: 'g',\n\t\t\t\t\tdescription: 'the rating of the image, either rating, g, pg, r or x',\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription: 'Protocol-less Gravatar image request URL',\n\t\t\tresolve: (source, args) =>\n\t\t\t\tsource.gravatarUrl(args.size, args.defaultImage, args.rating),\n\t\t},\n\t},\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/keystoneTypes.js","import _ from 'lodash'\nimport keystone from 'keystone'\nimport moment from 'moment'\n\nconst Types = keystone.Field.Types\n\n/**\n * ExhibCard Model\n * =============\n */\n\nvar ExhibCard = new keystone.List('Exhib-Card', {\n    track: true,\n    autokey: { path: 'key', from: 'name', unique: true }\n})\n\nExhibCard.add({\n    name: { type: String, required: true, index: true, initial: true, default: '**展会', label: '展会名称', note: '例如: 某某展会' },\n    imageSrc: { type: String, required: true, note: '图片引用地址, 例如: http://fancy-oss.oss-cn-shenzhen.aliyuncs.com/404-bg.jpg', label: '展会封面', default: 'http://' },\n    publishedAt: { type: Types.Datetime, index: true, label: '发布日期', required: true, default: moment.now() },\n})\n\nExhibCard.defaultSort = '+publishedAt'\nExhibCard.defaultColumns = 'name, imageSrc, publishedAt'\nExhibCard.register()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/ExhibCard.js","import _ from 'lodash'\nimport keystone from 'keystone'\nimport moment from 'moment'\n\nconst Types = keystone.Field.Types\n\n/**\n * Footprint Model\n * =============\n */\n\nconst Footprint = new keystone.List('Footprint', {\n    track: true,\n    autokey: { path: 'key', from: 'name', unique: true }\n})\n\nFootprint.add({\n    name: { type: String, required: true, label: '城市名称', note: '例如: 厦门' },\n    longitude: { type: String, required: true, index: true, width: 'medium', default: '0E', label: '经度', note: '例如: 23.45833E(东经), 23.45833W(西经)' },\n    latitude: { type: String, required: true, index: true, width: 'medium', default: '0N', label: '纬度', note: '例如: 30.000N(北纬), 30.000S(南纬)' },\n    publishedAt: { type: Types.Datetime, index: true, label: '发布日期', required: true, default: moment.now() }\n})\n\nFootprint.defaultSort = '-publishedAt'\nFootprint.defaultColumns = 'name, longitude, latitude, publishedAt'\nFootprint.schema.pre('save', function (next) {\n    if (/E|W/.test(this.longitude) && /S|N/.test(this.latitude)) {\n        next()\n    }\n})\nFootprint.register()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/Footprint.js","import _ from 'lodash'\nimport keystone from 'keystone'\nimport moment from 'moment'\n\nconst Types = keystone.Field.Types\n\n/**\n * Carousel-Images Model\n * =============\n */\n\nvar Carousel = new keystone.List('Carousel-Image', {\n    track: true,\n    autokey: { path: 'key', from: 'mark', unique: true }\n})\n\nCarousel.add({\n    mark: { type: String, required: true, index: true, initial: true, default: '16-11-26-0', label: '图片标记', note: '例如: year-month-day-no.' },\n    location: { type: String, initial: true, index: true, width: 'medium', note: '例如: 吉隆坡', label: '拍摄地点', default: '厦门' },\n    publishedAt: { type: Types.Datetime, index: true, label: '发布日期', required: true, default: moment.now() },\n    srcLocation: { type: String, required: true, note: '图片引用地址, 例如: http://fancy-oss.oss-cn-shenzhen.aliyuncs.com/404-bg.jpg', label: '图片地址', default: 'http://' },\n    legacy: { type: Boolean, noedit: true, collapse: true },\n})\n\nCarousel.defaultSort = '-publishedAt'\nCarousel.defaultColumns = 'mark, location, publishedAt'\nCarousel.register()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/IndexCarousel.js","import _ from 'lodash'\nimport keystone from 'keystone'\nimport moment from 'moment'\n\nconst Types = keystone.Field.Types\n\n/**\n * Slogan Model\n * =============\n */\n\nconst Slogan = new keystone.List('Slogan', {\n    track: true,\n    singular: 'Slogan',\n    plural: 'Slogan',\n    autokey: { path: 'key', from: 'content', unique: true },\n    nocreate: true,\n    nodelete: true\n})\n\nSlogan.add({\n    name: { type: String, noedit: true },\n    content: { type: String, initial: true, index: true, width: 'large', label: '标语内容', default: '...' },\n    publishedAt: { type: Types.Datetime, index: true, label: '发布日期', required: true, default: moment.now() }\n})\n\nSlogan.defaultSort = '-publishedAt'\nSlogan.defaultColumns = 'content|55%, publishedAt'\nSlogan.register()\n\nSlogan.model.find().remove((err) => {\n    if (!err) {\n        const indexSlogan = Slogan.model({\n            name: 'Automatically create one single slogan for index page when then system reboot and editable down below',\n            content: '2017年阿尔及利亚国际建筑建材展览会即将召开'\n        })\n\n        indexSlogan.save()\n    } else {\n        console.log(err)\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/Slogan.js","var keystone = require('keystone');\nvar Types = keystone.Field.Types;\n\nvar User = new keystone.List('User', {\n\t// nodelete prevents people deleting the demo admin user\n\tnodelete: true,\n});\n\nUser.add({\n\tname: { type: Types.Name, required: true, index: true },\n\temail: { type: Types.Email, initial: true, required: true, index: true, unique: true },\n\tphone: { type: String, width: 'short' },\n\tphoto: { type: Types.CloudinaryImage, collapse: true },\n\tpassword: { type: Types.Password, initial: true, required: false },\n}, 'Permissions', {\n\tisProtected: { type: Boolean, noedit: true, hidden: true },\n});\n\n// Provide access to Keystone\nUser.schema.virtual('canAccessKeystone').get(function () {\n\treturn true;\n});\n\nUser.relationship({ ref: 'Post', path: 'posts', refPath: 'author' });\n\nUser.schema.methods.wasActive = function () {\n\tthis.lastActiveOn = new Date();\n\treturn this;\n}\n\n/**\n * DEMO USER PROTECTION\n * The following code prevents anyone updating the default admin user\n * and breaking access to the demo\n */\n\nfunction protect (path) {\n\tvar user = this;\n\tUser.schema.path(path).set(function (value) {\n\t\treturn (user.isProtected) ? user.get(path) : value;\n\t});\n}\n\n['name.first', 'name.last', 'email'].forEach(protect);\n\nUser.schema.path('password').set(function (value) {\n\treturn (this.isProtected) ? '$2a$10$b4vkksMQaQwKKlSQSfxRwO/9JI7Fclw6SKMv92qfaNJB9PlclaONK' : value;\n});\n\n/**\n * END DEMO USER PROTECTION\n */\n\nUser.track = true;\nUser.defaultColumns = 'name, email, phone, photo';\nUser.register();\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/User.js","import keystone from 'keystone'\nimport fs from 'fs'\nimport graphqlHTTP from 'express-graphql'\nimport graphQLSchema from '../graphql/basicSchema'\nimport cache from 'lru-cache'\nimport serialize from 'serialize-javascript'\nimport PrettyError from 'pretty-error'\nimport { createBundleRenderer } from 'vue-server-renderer'\nimport config from '../../core/config'\n\nconst importRoutes = keystone.importer(__dirname)\nconst bundlePath = config.path.bundleFile\nconst renderer = createBundleRenderer(fs.readFileSync(bundlePath, 'utf-8'), {\n    cache: cache({ max: 10000 })\n})\nconst assets = require('./assets')\nconst pe = new PrettyError()\n\npe.skipNodeFiles()\npe.skipPackage('express')\n\nexports = module.exports = function (app) {\n    app.use('/api/graphql', graphqlHTTP({ schema: graphQLSchema, graphiql: true }))\n\n    app.get('*', async function (req, res, next) {\n        try {\n            let statusCode = 200\n            const data = {\n                title: 'Vuepack-SSR',\n                // description: '',\n                // css: '',\n                body: '',\n                entry: assets.main.js,\n            }\n            const context = { url: req.url }\n            data.body = await new Promise((resolve, reject) => {\n                renderer.renderToString(context, (err, html) => {\n                    if (err) {\n                        reject(err)\n                    }\n                    resolve(html)\n                })\n            })\n            data.initialState = serialize(context.initialState, { isJSON: true })\n            res.status(statusCode)\n            res.render('index', data)\n        } catch (err) {\n            next(err)\n        }\n    })\n\n    app.use((err, req, res, next) => {\n        console.log(pe.render(err))\n        const statusCode = err.status || 500\n        res.status(statusCode)\n        res.render('error', {\n            title: 'Error',\n            message: err.message,\n            stack: process.env.NODE_ENV === 'production' ? '' : err.stack\n        })\n        next()\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/routes/index.js","module.exports = require(\"./assets\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"./assets\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"express-graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-graphql\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"lru-cache\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lru-cache\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"pretty-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pretty-error\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"serialize-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serialize-javascript\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"vue-server-renderer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue-server-renderer\"\n// module id = 24\n// module chunks = 0"],"sourceRoot":""}